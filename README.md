# KICT Rain AI - ë”¥ëŸ¬ë‹ ê¸°ë°˜ ê°•ìˆ˜ëŸ‰ ì˜ˆì¸¡ ì‹œìŠ¤í…œ

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Python 3.8+](https://img.shields.io/badge/python-3.8+-blue.svg)](https://www.python.org/downloads/)
[![QGIS 3.40+](https://img.shields.io/badge/QGIS-3.40+-green.svg)](https://qgis.org/)

> í•œêµ­ê±´ì„¤ê¸°ìˆ ì—°êµ¬ì›(KICT) ë° HermeSysì—ì„œ ê°œë°œí•œ ë ˆì´ë” ë°ì´í„° ê¸°ë°˜ ì •ëŸ‰ì  ê°•ìˆ˜ ì˜ˆì¸¡ ì‹œìŠ¤í…œ

## ğŸ“‹ ëª©ì°¨

- [ì†Œê°œ](#-ì†Œê°œ)
- [ì£¼ìš” ê¸°ëŠ¥](#-ì£¼ìš”-ê¸°ëŠ¥)
- [ì„¤ì¹˜ ë°©ë²•](#-ì„¤ì¹˜-ë°©ë²•)
- [ì‚¬ìš© ë°©ë²•](#-ì‚¬ìš©-ë°©ë²•)
- [ëª¨ë¸ ë²„ì „](#-ëª¨ë¸-ë²„ì „)
- [í”„ë¡œì íŠ¸ êµ¬ì¡°](#-í”„ë¡œì íŠ¸-êµ¬ì¡°)
- [ê°œë°œ í™˜ê²½ ì„¤ì •](#-ê°œë°œ-í™˜ê²½-ì„¤ì •)
- [ë¼ì´ì„ ìŠ¤](#-ë¼ì´ì„ ìŠ¤)

## ğŸŒ§ï¸ ì†Œê°œ

KICT Rain AIëŠ” ë”¥ëŸ¬ë‹ ëª¨ë¸ì„ í™œìš©í•˜ì—¬ ë ˆì´ë” ë°ì´í„°ë¡œë¶€í„° ìµœëŒ€ 180ë¶„ ì•ì˜ ê°•ìˆ˜ íŒ¨í„´ì„ ì˜ˆì¸¡í•˜ëŠ” ì‹œìŠ¤í…œì…ë‹ˆë‹¤. QGIS í”ŒëŸ¬ê·¸ì¸ê³¼ ë…ë¦½ ì‹¤í–‰í˜• Python ìŠ¤í¬ë¦½íŠ¸ ë‘ ê°€ì§€ ë°©ì‹ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ì£¼ìš” íŠ¹ì§•

- **ë‹¤ì–‘í•œ ëª¨ë¸ ì˜µì…˜**: Keras í‘œì¤€ ëª¨ë¸, TFLite ìµœì í™” ëª¨ë¸, ì•™ìƒë¸” ëª¨ë¸ ì§€ì›
- **QGIS í†µí•©**: QGIS í”ŒëŸ¬ê·¸ì¸ìœ¼ë¡œ ì œê³µë˜ì–´ ê³µê°„ ë°ì´í„° ë¶„ì„ ì›Œí¬í”Œë¡œìš°ì— ì™„ë²½ í†µí•©
- **ë…ë¦½ ì‹¤í–‰ ê°€ëŠ¥**: QGIS ì—†ì´ë„ Python ìŠ¤í¬ë¦½íŠ¸ë¡œ ëª¨ë¸ ì‚¬ìš© ê°€ëŠ¥
- **ì‹¤ì‹œê°„ ì˜ˆì¸¡**: ë ˆì´ë” í•©ì„±ì˜ìƒ(HSP) ë°ì´í„°ë¥¼ ì…ë ¥ìœ¼ë¡œ ì‹¤ì‹œê°„ ê°•ìˆ˜ëŸ‰ ì˜ˆì¸¡

## âœ¨ ì£¼ìš” ê¸°ëŠ¥

- âœ… ë ˆì´ë” ë°ì´í„°(ASC í˜•ì‹) ê¸°ë°˜ ê°•ìˆ˜ëŸ‰ ì˜ˆì¸¡
- âœ… ìµœëŒ€ 180ë¶„ ì „ë°© ì˜ˆì¸¡
- âœ… 3ê°€ì§€ ëª¨ë¸ ë²„ì „ ì§€ì› (Ver1 Keras, Ver1 TFLite, Ver2 Ensemble)
- âœ… QGIS GUI ì¸í„°í˜ì´ìŠ¤ ì œê³µ
- âœ… ë°°ì¹˜ ì²˜ë¦¬ ì§€ì›
- âœ… ìë™ ì˜ì¡´ì„± ì„¤ì¹˜

## ğŸš€ ì„¤ì¹˜ ë°©ë²•

### í•„ìˆ˜ ìš”êµ¬ì‚¬í•­

- Python 3.8 ì´ìƒ
- QGIS 3.40 ì´ìƒ (í”ŒëŸ¬ê·¸ì¸ ì‚¬ìš© ì‹œ)

### 1. ì €ì¥ì†Œ í´ë¡ 

```bash
git clone https://github.com/hermesys2017/KICT_RAIN_KERAS.git
cd KICT_RAIN_KERAS
```

### 2. ì˜ì¡´ì„± ì„¤ì¹˜

```bash
pip install -r requirements.txt
```

ë˜ëŠ” ê°œë°œ ì˜ì¡´ì„± í¬í•¨:

```bash
pip install -r requirements-dev.txt
```

### 3. QGIS í”ŒëŸ¬ê·¸ì¸ ì„¤ì¹˜ (ì„ íƒì‚¬í•­)

1. QGISë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤
2. `í”ŒëŸ¬ê·¸ì¸` > `í”ŒëŸ¬ê·¸ì¸ ê´€ë¦¬ ë° ì„¤ì¹˜`ë¡œ ì´ë™
3. `ZIPì—ì„œ ì„¤ì¹˜` íƒ­ ì„ íƒ
4. `kict_rain_ai` í´ë”ë¥¼ ì••ì¶•í•˜ì—¬ ì—…ë¡œë“œ
5. í”ŒëŸ¬ê·¸ì¸ í™œì„±í™”

**ì°¸ê³ **: í”ŒëŸ¬ê·¸ì¸ ìµœì´ˆ ì‹¤í–‰ ì‹œ í•„ìš”í•œ íŒ¨í‚¤ì§€(tensorflow, gdown)ê°€ ìë™ìœ¼ë¡œ ì„¤ì¹˜ë©ë‹ˆë‹¤.

## ğŸ“– ì‚¬ìš© ë°©ë²•

### ë°©ë²• 1: Python ìŠ¤í¬ë¦½íŠ¸ë¡œ ì‚¬ìš©

`main.py` íŒŒì¼ì„ ì‚¬ìš©í•˜ì—¬ ëª¨ë¸ì„ ì§ì ‘ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```python
from data import dataset
from model_oop import RainVer1Model, RainVer1TfliteModel, RainVer2Model

# ì…ë ¥ íŒŒì¼ ê²½ë¡œ ì„¤ì •
files = [
    "./datas/RDR_CMP_HSP_PUB_202208082320-525x625-1km.asc",
    "./datas/RDR_CMP_HSP_PUB_202208082330-525x625-1km.asc",
    "./datas/RDR_CMP_HSP_PUB_202208082340-525x625-1km.asc",
    "./datas/RDR_CMP_HSP_PUB_202208082350-525x625-1km.asc",
]

# Ver1 ëª¨ë¸ ì‚¬ìš©
input_data = dataset(files)
model = RainVer1Model("./models/model-best_rec_180min_f.h5")
model.save_prediction_files(input_data, "output/ver1/")

# Ver2 ì•™ìƒë¸” ëª¨ë¸ ì‚¬ìš©
input_data = dataset(files)
model = RainVer2Model("./models")
model.save_prediction_files(input_data, "output/ver2/")

# Ver1 TFLite ëª¨ë¸ ì‚¬ìš©
input_data = dataset(files, is_ver1_tflite=True)
model = RainVer1TfliteModel("./models/model-best_rec_180min_f.tflite")
model.save_prediction_files(input_data, "output/ver1_tflite/")
```

ì‹¤í–‰:
```bash
python main.py
```

### ë°©ë²• 2: QGIS í”ŒëŸ¬ê·¸ì¸ìœ¼ë¡œ ì‚¬ìš©

1. QGISì—ì„œ í”ŒëŸ¬ê·¸ì¸ í™œì„±í™”
2. íˆ´ë°”ì—ì„œ KICT Rain AI ì•„ì´ì½˜ í´ë¦­
3. GUIì—ì„œ ì…ë ¥ íŒŒì¼ ì„ íƒ
4. ëª¨ë¸ ë²„ì „ ì„ íƒ
5. ì˜ˆì¸¡ ì‹¤í–‰

## ğŸ”§ ëª¨ë¸ ë²„ì „

### Ver1 - Keras ëª¨ë¸
- **íŒŒì¼ í˜•ì‹**: `.h5`
- **íŠ¹ì§•**: í‘œì¤€ Keras/TensorFlow ëª¨ë¸
- **ìš©ë„**: ë†’ì€ ì •í™•ë„ê°€ í•„ìš”í•œ ê²½ìš°

### Ver1 TFLite - ê²½ëŸ‰í™” ëª¨ë¸
- **íŒŒì¼ í˜•ì‹**: `.tflite`
- **íŠ¹ì§•**: TensorFlow Liteë¡œ ìµœì í™”ëœ ê²½ëŸ‰ ëª¨ë¸
- **ìš©ë„**: ë¹ ë¥¸ ì¶”ë¡  ì†ë„ê°€ í•„ìš”í•œ ê²½ìš°

### Ver2 - ì•™ìƒë¸” ëª¨ë¸
- **íŒŒì¼ í˜•ì‹**: ì—¬ëŸ¬ `.tflite` ëª¨ë¸
- **íŠ¹ì§•**: ë‹¤ì¤‘ ëª¨ë¸ ì•™ìƒë¸”ë¡œ ì•ˆì •ì ì¸ ì˜ˆì¸¡
- **ìš©ë„**: ìµœê³ ì˜ ì˜ˆì¸¡ ì„±ëŠ¥ì´ í•„ìš”í•œ ê²½ìš°

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
KICT_RAIN_KERAS/
â”œâ”€â”€ kict_rain_ai/          # QGIS í”ŒëŸ¬ê·¸ì¸ ì†ŒìŠ¤
â”‚   â”œâ”€â”€ kict_rain_ai.py    # í”ŒëŸ¬ê·¸ì¸ ë©”ì¸ í´ë˜ìŠ¤
â”‚   â”œâ”€â”€ kict_rain_ai_dialog.py  # UI ë‹¤ì´ì–¼ë¡œê·¸
â”‚   â”œâ”€â”€ services/          # ëª¨ë¸ ì„œë¹„ìŠ¤ ë¡œì§
â”‚   â”œâ”€â”€ models/            # í•™ìŠµëœ ëª¨ë¸ íŒŒì¼
â”‚   â””â”€â”€ test/              # í…ŒìŠ¤íŠ¸ ì½”ë“œ
â”œâ”€â”€ main.py                # ë…ë¦½ ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸
â”œâ”€â”€ model_oop.py           # ëª¨ë¸ í´ë˜ìŠ¤ ì •ì˜
â”œâ”€â”€ data.py                # ë°ì´í„° ì „ì²˜ë¦¬
â”œâ”€â”€ requirements.txt       # Python ì˜ì¡´ì„±
â”œâ”€â”€ pyproject.toml         # í”„ë¡œì íŠ¸ ì„¤ì •
â””â”€â”€ README.md              # í”„ë¡œì íŠ¸ ë¬¸ì„œ
```

## ğŸ› ï¸ ê°œë°œ í™˜ê²½ ì„¤ì •

### ì½”ë“œ ìŠ¤íƒ€ì¼

ì´ í”„ë¡œì íŠ¸ëŠ” [Ruff](https://github.com/astral-sh/ruff)ë¥¼ ì‚¬ìš©í•˜ì—¬ ì½”ë“œ ìŠ¤íƒ€ì¼ì„ ê´€ë¦¬í•©ë‹ˆë‹¤:

```bash
# ì½”ë“œ í¬ë§·íŒ…
ruff format .

# ë¦°íŒ…
ruff check .
```

### í…ŒìŠ¤íŠ¸ ì‹¤í–‰

```bash
cd kict_rain_ai
python -m pytest test/
```

### í”ŒëŸ¬ê·¸ì¸ ë¹Œë“œ

```bash
cd kict_rain_ai
make zip
```

## ğŸ“„ ë¼ì´ì„ ìŠ¤

ì´ í”„ë¡œì íŠ¸ëŠ” MIT ë¼ì´ì„ ìŠ¤ í•˜ì— ë°°í¬ë©ë‹ˆë‹¤. ìì„¸í•œ ë‚´ìš©ì€ [LICENSE](LICENSE) íŒŒì¼ì„ ì°¸ì¡°í•˜ì„¸ìš”.

## ğŸ‘¥ ê°œë°œì

- **í•œêµ­ê±´ì„¤ê¸°ìˆ ì—°êµ¬ì› (KICT)**
- **HermeSys**
  - Email: info@hermesys.co.kr
  - Website: http://www.hermesys.co.kr

## ğŸ”— ë§í¬

- [GitHub Repository](https://github.com/hermesys2017/KICT_RAIN_KERAS)
- [Issue Tracker](https://github.com/hermesys2017/KICT_RAIN_KERAS/issues)
- [QGIS Plugin Repository](https://plugins.qgis.org/)

## ğŸ“ ì§€ì›

ë¬¸ì œê°€ ë°œìƒí•˜ê±°ë‚˜ ì§ˆë¬¸ì´ ìˆìœ¼ì‹œë©´ [ì´ìŠˆ íŠ¸ë˜ì»¤](https://github.com/hermesys2017/KICT_RAIN_KERAS/issues)ì— ë“±ë¡í•´ì£¼ì„¸ìš”.
